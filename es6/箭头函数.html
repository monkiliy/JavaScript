<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>箭头函数</title>
</head>
<body>
    <script>
        /* function fn(a,b){
            console.log(a,b);
        }
        fn(1,3);
        let fn1 = (a,b) => {
            console.log(a+b);
        }
        fn1(1,5);

        // 注意点 
        // 1.如果参数只有一个 可以省略小括号
        let fn2 = a => {
            console.log(a);
        }
        fn2(2)
        // 2.如果参数是0个或者2个及2个以上 必须有小括号
        let fn3 = () => {
            console.log('x');
        }
        // 3.如果大括号只有一条语句，可以省略大括号，但是如果是ruturn语句的话，必须省略掉 return (在省略调大括号的前提下)；
        let fn4 = (a,b) => console.log(a+b);
        fn4(3,5);
        let fn5 = (a,b) =>  a + b;
        var s = fn5(2,3);
        console.log(s); */

        /* // 使用
        let arr = [1,3,5];
        let arr1 = arr.map(function(value){
            return value * value;
        })
        console.log(arr1);
        let arr2 = arr.map(value => value * value);
        console.log(arr2); */

        // 注意点
        // 1.this指向的问题
        let obj = {
            init: function(){
                document.addEventListener('click',function(e){
                    console.log(this);
                    this.output(e.type)//this指向问题。这个this指向document 报错
                })
            },
            output: function(value){
                console.log(value);
            }
        }
        obj.init();
            
        // 使用箭头函数
        // 1.箭头函数内没有this指向，他只能借用父级作用域的this指向。
        // 2.箭头函数使用父级作用域的this指向不能更改
        // 3.不能使用arguments
        // 4.不能使用构造函数

        // 1.借用父级作用域
        let obj = {
            init: function(){
                document.addEventListener('click',(e) => {
                    console.log(this);
                    this.output(e.type)//this指向问题。this借用父级作用域
                })
            },
            output: function(value){
                console.log(value);
            }
        }
        obj.init();

        // 2.不能改变this指向
        let obj1 = {
            init: () => {
                // console.log(arguments);//报错
                console.log(this);
            }
        }
        obj1.init();//window
        obj1.init.bind(obj1)();//window 不能通过call bind apply 改变this指向
        // new obj1.init();//报错 不能使用构造函数

        // 解决this指向问题 方法 1
        let obj = {
            init: function(){
                let _this = this;
                document.addEventListener('click',function(e){
                    console.log(this);
                    _this.output(e.type)
                })
            },
            output: function(value){
                console.log(value);
            }
        }
        obj.init();

        // 解决this指向问题 方法 2
        let obj = {
            init: function(){
                document.addEventListener('click',function(e){
                    console.log(this);
                    this.output(e.type)
                }.bind(this))
            },
            output: function(value){
                console.log(value);
            }
        }
        obj.init();
    </script>
</body>
</html>